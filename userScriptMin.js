!function(){"use strict";GM_addStyle("\n      .medium-preview {\n          position: fixed;\n          z-index: 999999999;\n          display: none;\n          width: 90vw;\n          max-width: 800px;\n          height: 85vh;\n          background: #fff;\n          border-radius: 12px;\n          box-shadow: 0 8px 30px rgba(0,0,0,0.12);\n          overflow: hidden;\n          opacity: 0;\n          transform: translate(0, 0);\n          transition: transform 0.2s ease;\n          font-family: -apple-system, system-ui, sans-serif;\n          resize: both;\n      }\n\n      .medium-preview.visible {\n          opacity: 1;\n          transform: scale(1) translateY(0);\n      }\n\n      .medium-preview.fullscreen {\n          width: 100vw !important;\n          height: 100vh !important;\n          max-width: none !important;\n          top: 0 !important;\n          left: 0 !important;\n          border-radius: 0;\n          resize: none;\n      }\n\n      .preview-header {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 56px;\n          background: #fff;\n          border-bottom: 1px solid rgba(0,0,0,0.1);\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0 16px;\n          cursor: move;\n          backdrop-filter: blur(8px);\n          z-index: 2;\n      }\n\n      .preview-meta {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          max-width: 60%;\n      }\n\n      .preview-favicon {\n          width: 20px;\n          height: 20px;\n          border-radius: 4px;\n      }\n\n      .preview-title {\n          font-size: 14px;\n          font-weight: 500;\n          color: #1a1a1a;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n      }\n\n      .preview-controls {\n          display: flex;\n          gap: 8px;\n      }\n\n      .preview-button {\n          width: 32px;\n          height: 32px;\n          border-radius: 8px;\n          border: none;\n          background: transparent;\n          color: #666;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 18px;\n          transition: all 0.2s;\n      }\n\n      .preview-button:hover {\n          background: rgba(0,0,0,0.05);\n          color: #000;\n      }\n\n      .preview-content {\n          width: 100%;\n          height: calc(100% - 56px);\n          margin-top: 56px;\n      }\n\n      .preview-iframe {\n          width: 100%;\n          height: 100%;\n          border: none;\n      }\n\n      .medium-toggle {\n          position: fixed;\n          bottom: 24px;\n          right: 24px;\n          background: #fff;\n          border-radius: 30px;\n          padding: 8px 16px;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 13px;\n          color: #666;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n          border: 1px solid #eee;\n          cursor: pointer;\n          z-index: 999999;\n          transition: all 0.2s;\n      }\n\n      .context-menu {\n          position: fixed;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          padding: 8px 0;\n          min-width: 180px;\n          z-index: 9999999999;\n      }\n\n      .context-item {\n          padding: 8px 16px;\n          cursor: pointer;\n          font-size: 13px;\n          color: #333;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n      }\n\n      .context-item:hover {\n          background: #f5f5f5;\n      }\n  ");let e=new Map,n=null;const t=GM_getValue("previewEnabled",!0);function i(n,t,i){const o=document.createElement("div");o.className="medium-preview";const r=`https://readmedium.com/en/${encodeURIComponent(n)}`,s=new URL(n),a=s.pathname.split("/").pop().replace(/-/g," "),l=`https://www.google.com/s2/favicons?domain=${s.hostname}&sz=64`;return o.innerHTML=`\n          <div class="preview-header">\n              <div class="preview-meta">\n                  <img class="preview-favicon" src="${l}">\n                  <div class="preview-title">${a}</div>\n              </div>\n              <div class="preview-controls">\n                  <button class="preview-button open-button" title="Open in New Tab">‚Üó</button>\n                  <button class="preview-button fullscreen-button" title="Toggle Fullscreen">‚§¢</button>\n                  <button class="preview-button close-button" title="Close">√ó</button>\n              </div>\n          </div>\n          <div class="preview-content">\n              <iframe class="preview-iframe" src="${r}" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>\n          </div>\n      `,o.style.left=`${t}px`,o.style.top=`${i}px`,function(n){const t=n.querySelector(".preview-header");let i,o,r=!1;t.onmousedown=t=>{if(n.classList.contains("fullscreen"))return;r=!0,i=t.clientX-n.offsetLeft,o=t.clientY-n.offsetTop,n.style.zIndex=Math.max(...Array.from(e.values()).map((e=>parseInt(e.style.zIndex||999999999))))+1;const s=e=>{r&&(e.preventDefault(),n.style.left=e.clientX-i+"px",n.style.top=e.clientY-o+"px")},a=()=>{r=!1,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a)}}(o),function(n,t){n.querySelector(".close-button").onclick=()=>{n.classList.remove("visible"),setTimeout((()=>{n.remove(),e.delete(t)}),200)},n.querySelector(".fullscreen-button").onclick=()=>{n.classList.toggle("fullscreen");n.querySelector(".fullscreen-button").textContent=n.classList.contains("fullscreen")?"‚ü≤":"‚§¢"},n.querySelector(".open-button").onclick=()=>window.open(n.querySelector("iframe").src,"_blank")}(o,n),document.body.appendChild(o),o.style.display="block",requestAnimationFrame((()=>o.classList.add("visible"))),e.set(n,o),o}document.addEventListener("contextmenu",(function(e){const o=e.target.closest('a[href*="medium.com"], [data-href*="medium.com"]');if(!o||!t)return;e.preventDefault(),n&&n.remove();const r=o.getAttribute("data-href")||o.href;n=document.createElement("div"),n.className="context-menu",n.innerHTML='\n          <div class="context-item preview-item">üìÑ Preview Article</div>\n          <div class="context-item open-item">‚ÜóÔ∏è Open in New Tab</div>\n      ',n.style.left=`${e.clientX}px`,n.style.top=`${e.clientY}px`,n.querySelector(".preview-item").onclick=()=>{i(r,e.clientX,e.clientY),n.remove()},n.querySelector(".open-item").onclick=()=>{window.open(r,"_blank"),n.remove()},document.body.appendChild(n)})),document.addEventListener("click",(e=>{n&&!n.contains(e.target)&&n.remove()}))}();